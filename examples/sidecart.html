<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>
        <link href="../src/css/perseusld.css" rel="stylesheet" type="text/css"/>
        <link href="../third_party/sidecart/src/css/sidecart.css" rel="stylesheet" type="text/css"/>
    </head>
    <style type="text/css">
        body > .perseusld {
            display: none;
        }
    </style>
    <body>
        <!-- Side Cart DOM -->
        <div id="sidecartRight"></div>
        
        <!-- PerseusLD Widget Config -->
        <div id="data" class="widget secondary">
            <div id="data-contents" class="contents">
                <div resource="http://data.perseus.org/artifacts/vase/Malibu+87.AE.22" typeof="http://www.cidoc-crm.org/cidoc-crm/E22_Man-Made_Object"></div>
            </div>
        </div>
        
        <!-- First Query -->
        <div class="perseusld" id="query_results_1" 
            serialization="oac"
            sbj="#data-contents" 
            sbjclass='object' 
            verb="http://www.w3.org/ns/oa#hasTarget" 
            formatter="filter_artifact_annotations"
            resourceurl="http://localhost/perseusld/src"
            endpoint="http://localhost:3030/ds/query?query=">
                <div class="perseusld_results perseusld_artifact"></div>
        </div>
        
        <!-- Second Query -->
        <div class="perseusld" id="query_results_2" 
            serialization="oac"
            sbj="#data-contents" 
            sbjclass='object' 
            verb="http://www.w3.org/ns/oa#hasTarget" 
            formatter="filter_artifact_annotations"
            resourceurl="http://localhost/perseusld/src"
            endpoint="http://localhost:3030/ds/query?query=">
                <div class="perseusld_results perseusld_artifact"></div>
        </div>
        
    </body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript" src="../third_party/sidecart/src/js/sidecart.js"></script>
    <script type="text/javascript" src="../third_party/sidecart/third_party/Readmore.js/readmore.min.js"></script>
    <script type="text/javascript" src="../third_party/sidecart/third_party/jslib/src/js/Styler.js"></script>
    <script type="text/javascript" src="../third_party/sidecart/third_party/jslib/src/js/jQueryPlus.js"></script>
    <script type="text/javascript" src="../third_party/sidecart/third_party/jslib/src/js/StringExt.js"></script>
    <script src="../src/js/perseusld.js"></script>
    <script src="http://sosol.perseids.org/sosol/javascripts/pagedown/Markdown.Converter.js"></script>
    <script src="http://sosol.perseids.org/sosol/javascripts/pagedown/Markdown.Sanitizer.js"></script>
    <script src="http://sosol.perseids.org/sosol/javascripts/pagedown/Markdown.Editor.js"></script>
    <script type="text/javascript">

        var sidecart = null;
        jQuery().ready( function() {
            //------------------------------------------------------------
            //  Get a sidecart instance.
            //------------------------------------------------------------
            sidecart = jQuery('#sidecartRight').sidecart({
                side: 'right'
            }).data('#sidecartRight');
            
            //------------------------------------------------------------
            //  Add sidecart views as PerseusLD data is loaded.
            //------------------------------------------------------------
            jQuery("#query_results_1").on( 'PerseusLD--LOADED', function( _e, _extra ) {
                //------------------------------------------------------------
                //  Check event extra object to see if "last" item is true.
                //------------------------------------------------------------
                sidecart.addView({
                    id: 'annotations_1',
                    type: 'annotations',
                    link: 'Artifacts',
                    src: '#query_results_1 .perseusld_results',
                    //------------------------------------------------------------
                    //  This callback function runs once when the view is first
                    //  initialized.
                    //------------------------------------------------------------
                    init: function() {;
                        jQuery('#sidecartRight #annotations_1 .annotation').readmore({
                            maxHeight: 200,
                            moreLink: '<a href="#">More</a>',
                            lessLink: '<a href="#">Less</a>'
                        });
                    },
                    //------------------------------------------------------------
                    //  This callback function runs everytime a view's tab is clicked
                    //------------------------------------------------------------
                    refresh: function() {}
                });
            });
            
            //------------------------------------------------------------
            //  Add sidecart views as PerseusLD data is loaded.
            //------------------------------------------------------------
            jQuery("#query_results_2").on( 'PerseusLD--LOADED', function( _e, _extra ) {
                //------------------------------------------------------------
                //  Check event extra object to see if "last" item is true.
                //------------------------------------------------------------
                sidecart.addView({
                    id: 'annotations_2',
                    type: 'annotations',
                    link: 'Artifacts-2',
                    src: '#query_results_2 .perseusld_results',
                    //------------------------------------------------------------
                    //  This callback function runs once when the view is first
                    //  initialized.
                    //------------------------------------------------------------
                    init: function() {
                        jQuery('#sidecartRight #annotations_2 .annotation').readmore({
                            maxHeight: 200,
                            moreLink: '<a href="#">More</a>',
                            lessLink: '<a href="#">Less</a>'
                        });
                    },
                    //------------------------------------------------------------
                    //  This callback function runs everytime a view's tab is clicked
                    //------------------------------------------------------------
                    refresh: function() {}
                });
            });
            
            //------------------------------------------------------------
            //  Start it up!
            //------------------------------------------------------------
            jQuery( "#query_results_1" ).PerseusLD();
            jQuery( "#query_results_2" ).PerseusLD();
        });
    </script>
</html>
